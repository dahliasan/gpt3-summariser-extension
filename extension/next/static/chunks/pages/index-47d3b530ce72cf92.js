(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6317)}])},6317:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n(5893),c=n(7294);let o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--><path d="M280 64h40c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128c0-35.3 28.7-64 64-64h49.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64h9.6zM64 112c-8.8 0-16 7.2-16 16v320c0 8.8 7.2 16 16 16h256c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16h-16v24c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24v-24H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"/></svg>',i=()=>{let e=document.getElementById("search_input"),t=document.getElementById("search_submit");e.addEventListener("keyup",e=>{if("Enter"===e.key){e.preventDefault();let t=e.target.value;chrome.runtime.sendMessage({searchValue:t})}}),t.addEventListener("click",t=>{let n=e.value;chrome.runtime.sendMessage({searchValue:n})})};function r(){console.log("fetching summaries..."),chrome.storage.local.get(null,e=>{let t=Object.keys(e).filter(e=>e.includes("summary")&&!e.includes("summaryIndex")).sort((t,n)=>e[n].date-e[t].date);for(let n of t){let t=m(e[n],n),s=document.getElementById("summaries");s.appendChild(t)}})}function m(e,t){let n=document.createElement("div");n.className="summary";let s=document.createElement("div"),c=e.title;s.innerHTML=c,s.className="summary-text";let i=function(e){let t=document.createElement("button");return t.innerHTML=o,t.className="copy-button",t.onclick=function(){navigator.clipboard.writeText(e),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--><path d="M243.8 339.8c-10.9 10.9-28.7 10.9-39.6 0l-64-64c-10.9-10.9-10.9-28.7 0-39.6 10.9-10.9 28.7-10.9 39.6 0l44.2 44.2 108.2-108.2c10.9-10.9 28.7-10.9 39.6 0 10.9 10.9 10.9 28.7 0 39.6l-128 128zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256zM256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"/></svg>',setTimeout(()=>{t.innerHTML=o},1e3)},t}(c),r=function(e,t){let n=document.createElement("button");return n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--><path d="M160 400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16v208zm80 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16v208zm80 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16v208zm-2.5-375.06L354.2 80H424c13.3 0 24 10.75 24 24 0 13.3-10.7 24-24 24h-8v304c0 44.2-35.8 80-80 80H112c-44.18 0-80-35.8-80-80V128h-8c-13.25 0-24-10.7-24-24 0-13.25 10.75-24 24-24h69.82l36.68-55.06C140.9 9.357 158.4 0 177.1 0h93.8c18.7 0 36.2 9.358 46.6 24.94zM151.5 80h145l-19-28.44c-1.5-2.22-4-3.56-6.6-3.56h-93.8c-2.6 0-6 1.34-6.6 3.56L151.5 80zM80 432c0 17.7 14.33 32 32 32h224c17.7 0 32-14.3 32-32V128H80v304z"/></svg>',n.className="delete-button",n.onclick=function(){chrome.storage.local.remove(e),t.remove()},n}(t,n),m=document.createElement("div");return m.className="buttons-wrapper",m.appendChild(i),m.appendChild(r),n.appendChild(s),n.appendChild(m),s.addEventListener("click",t=>{chrome.tabs.query({active:!0,currentWindow:!0},t=>{chrome.tabs.sendMessage(t[0].id,{type:"inject",message:e},e=>{console.log(e)})})}),n}let l=()=>((0,c.useEffect)(()=>{i(),r(),chrome.runtime.onMessage.addListener((e,t,n)=>{if("search_results"===e.type){console.log("search results received by popup: ",e);let{searchResults:t}=e;(function(e){let t=function(e){let t=e.reduce((e,t)=>e+t.similarity,0)/e.length;console.log("average similarity score: ",t);let n=e.filter(e=>e.similarity>=t);return n}(e);if(document.getElementById("summaries").innerHTML="",t.forEach(e=>{let t=m(e,"summary-".concat(e.id));document.getElementById("summaries").appendChild(t)}),!document.getElementById("view_all_summaries")){let e=document.createElement("button");e.id="view_all_summaries",e.innerHTML="View All Summaries";let t=document.querySelector(".form:has(#search_input)");t.parentNode.insertBefore(e,t.nextSibling),e.style.display="block",e.addEventListener("click",t=>{document.getElementById("summaries").innerHTML="",console.log(document.getElementById("summaries")),r(),e.remove(),document.getElementById("search_input").value=""})}})(t)}})},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form",children:[(0,s.jsx)("input",{id:"search_input",placeholder:"search summaries..."}),(0,s.jsx)("button",{id:"search_submit",children:">"})]}),(0,s.jsx)("div",{id:"summaries"})]}));var a=l}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);